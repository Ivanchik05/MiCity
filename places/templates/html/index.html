{% extends "base.html" %}
{% load static %}

{% block title %}–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞{% endblock %}
{% block link %}
<link rel="stylesheet" href="{% static 'places/css/index.css' %}">
{% endblock %}
{% block header %}–õ–ï–ë–ï–î–Ø–ù–¨{% endblock %}

{% block content %}
<!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–µ -->
<nav class="page-navigation">
    <ul>
        <li><a href="#history">üìú –ò—Å—Ç–æ—Ä–∏—è –≥–æ—Ä–æ–¥–∞</a></li>
        <li><a href="#17century">üè∞ XVII-XVIII –≤–µ–∫–∞</a></li>
        <li><a href="#19century">üêé XIX –≤–µ–∫</a></li>
        <li><a href="#soviet">üõ†Ô∏è –°–æ–≤–µ—Ç—Å–∫–∏–π –ø–µ—Ä–∏–æ–¥</a></li>
    </ul>
</nav>

<!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –±–ª–æ–∫–∞–º–∏ -->
<div class="content-container">
    <p style="text-align: center;font-family: 'Monomakh', serif;font-size: 30px;">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –Ω–∞ –Ω–∞—à—É <span style="font-weight: bold;">–≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞</span>!</p>

    <div class="slideshow">
        <div class="slide fade"><img src="{% static 'places/images/slide_1.jpg' %}" alt="Image 1"></div>
        <div class="slide fade"><img src="{% static 'places/images/slide_2.jpg' %}" alt="Image 2"></div>
        <div class="slide fade"><img src="{% static 'places/images/slide_3.jpg' %}" alt="Image 3"></div>
        <div class="slide fade"><img src="{% static 'places/images/slide_4.jpg' %}" alt="Image 4"></div>
    </div>

    <!-- –ü–æ—Å—Ç—ã -->
    {% if posts_data %}
        {% for post_data in posts_data %}
            <div class="history post" id="{{ post_data.post.section_id }}" data-post-id="{{ post_data.post.id }}">
                <h2>{{ post_data.post.title }}</h2>
                <div class="post-content">
                    {{ post_data.post.content | safe }}
                </div>
                <div class="like-dislike">
                    {% if user.is_authenticated %}
                        <button class="like-btn" data-post-id="{{ post_data.post.id }}">üëç Like (<span class="like-count">{{ post_data.likes }}</span>)</button>
                        <button class="dislike-btn" data-post-id="{{ post_data.post.id }}">üëé Dislike (<span class="dislike-count">{{ post_data.dislikes }}</span>)</button>
                    {% else %}
                        <button class="like-btn" data-post-id="{{ post_data.post.id }}" disabled>üëç Like (<span class="like-count">{{ post_data.likes }}</span>)</button>
                        <button class="dislike-btn" data-post-id="{{ post_data.post.id }}" disabled>üëé Dislike (<span class="dislike-count">{{ post_data.dislikes }}</span>)</button>
                        <p style="color: red; font-size: 14px;">–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã —Å—Ç–∞–≤–∏—Ç—å –ª–∞–π–∫–∏ –∏ –¥–∏–∑–ª–∞–π–∫–∏.</p>
                    {% endif %}
                </div>
            </div>
        {% endfor %}
    {% else %}
        <p style="text-align: center; color: red;">–ü–æ—Å—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã.</p>
    {% endif %}

    <!-- –ö–Ω–æ–ø–∫–∞ "–ù–∞–≤–µ—Ä—Ö" -->
    <div class="back-to-top">
        <a href="#">üîù –ù–∞–≤–µ—Ä—Ö</a>
    </div>
</div>

<script src="{% static 'places/js/comments.js' %}" defer></script>
<script>
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
        // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
        e.preventDefault();

        const targetId = this.getAttribute('href').substring(1);
        const targetElement = document.getElementById(targetId);

        if (targetElement) {
            // –°–º–µ—â–µ–Ω–∏–µ
            const offset = -250;
            const topPos = targetElement.getBoundingClientRect().top + window.scrollY + offset;

            window.scrollTo({
                top: topPos,
                behavior: 'smooth'
            });
        }
    });
});
</script>
{% endblock %}