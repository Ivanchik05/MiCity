{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}–ú–æ–π —Å–∞–π—Ç{% endblock %}</title>
    <link rel="icon" type="image/x-icon" href="{% static 'places/images/logo.ico' %}">
    {% block link %}{% endblock %}
    <link rel="stylesheet" href="{% static 'places/css/styles.css' %}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Monomakh&display=swap" rel="stylesheet">
    <style>
        /* –°—Ç–∏–ª—å –¥–ª—è –∫—Ä–∞—Å–Ω–æ–π –∫–Ω–æ–ø–∫–∏ "–í—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞" */
        .logout-btn {
            background-color: #ff0000; /* –ö—Ä–∞—Å–Ω—ã–π —Ñ–æ–Ω */
            color: white; /* –ë–µ–ª—ã–π —Ç–µ–∫—Å—Ç */
            padding: 10px 20px; /* –û—Ç—Å—Ç—É–ø—ã */
            border: none; /* –£–±–∏—Ä–∞–µ–º –≥—Ä–∞–Ω–∏—Ü—É */
            border-radius: 5px; /* –°–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–µ —É–≥–ª—ã */
            text-decoration: none; /* –£–±–∏—Ä–∞–µ–º –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏–µ */
            display: inline-block; /* –î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è */
        }
        .logout-btn:hover {
            background-color: #cc0000; /* –¢–µ–º–Ω–µ–µ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
        }
    </style>
</head>
<body>
<div id="loader" class="loader-container">
    <div class="loader"></div>
</div>

<header style="background-color: #00308f;">
    <h1 style="font-family: 'Monomakh', serif;">{% block header %}–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å{% endblock %}</h1>

    <!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –º–µ–Ω—é -->
    <button class="menu-toggle" onclick="toggleMenu()">‚ò∞ –ú–µ–Ω—é</button>

    <nav id="mobile-menu">
        <a href="{% url 'index' %}" class="nav-button">üè† –ì–ª–∞–≤–Ω–∞—è</a>
        <a href="{% url 'about' %}" class="nav-button">‚ÑπÔ∏è –û–±–æ –º–Ω–µ</a>
        <a href="{% url 'map' %}" class="nav-button">üó∫Ô∏è –ö–∞—Ä—Ç–∞ –≥–æ—Ä–æ–¥–∞</a>
        <a href="{% url 'contact' %}" class="nav-button">üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã</a>

        <!-- –£—Å–ª–æ–≤–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å—Ç–∞—Ç—É—Å–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
        {% if user.is_authenticated %}
            <!-- –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É "–í—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞" -->
            <a href="{% url 'logout' %}" class="nav-button btn logout-btn">–í—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞</a>
        {% else %}
            <!-- –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫–∏ "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è" –∏ "–í–æ–π—Ç–∏" -->
            <a href="{% url 'register' %}" class="nav-button btn register-btn">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
            <a href="{% url 'login' %}" class="nav-button btn login-btn">–í–æ–π—Ç–∏</a>
        {% endif %}

        <button class="close-menu" onclick="toggleMenu()">‚ùå –ó–∞–∫—Ä—ã—Ç—å –º–µ–Ω—é</button>
    </nav>
</header>

<main>
    {% csrf_token %}
    {% block content %}
    {% endblock %}
</main>

<footer>
    <p>¬© 2025 –ú–æ–π –°–∞–π—Ç. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
</footer>

<script>
// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–∏–¥–∏–º–æ—Å—Ç–∏ –º–µ–Ω—é
function toggleMenu() {
    let menu = document.getElementById("mobile-menu");
    let button = document.querySelector(".menu-toggle");
    menu.classList.toggle("active");

    // –°–∫—Ä—ã—Ç—å/–ø–æ–∫–∞–∑–∞—Ç—å –∫–Ω–æ–ø–∫—É –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è –º–µ–Ω—é
    if (menu.classList.contains("active")) {
        button.style.display = "none"; // –°–∫—Ä—ã—Ç—å –∫–Ω–æ–ø–∫—É
    } else {
        button.style.display = "block"; // –ü–æ–∫–∞–∑–∞—Ç—å –∫–Ω–æ–ø–∫—É
    }
}

// –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–µ–Ω—é –ø—Ä–∏ –∫–ª–∏–∫–µ –∑–∞ –µ–≥–æ –ø—Ä–µ–¥–µ–ª–∞–º–∏
document.addEventListener("click", function (event) {
    let menu = document.getElementById("mobile-menu");
    let button = document.querySelector(".menu-toggle");
    if (!menu.contains(event.target) && !button.contains(event.target)) {
        menu.classList.remove("active");
        button.style.display = "block"; // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É, –µ—Å–ª–∏ –º–µ–Ω—é –∑–∞–∫—Ä—ã—Ç–æ
    }
});

// –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –ø—É–Ω–∫—Ç –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –∑–∞–∫—Ä—ã–≤–∞–µ–º –º–µ–Ω—é –∏ —Å–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É "–ú–µ–Ω—é" –Ω–∞ –ü–ö
document.querySelectorAll('.nav-button').forEach(function(link) {
    link.addEventListener('click', function(event) {
        let menu = document.getElementById("mobile-menu");
        let button = document.querySelector(".menu-toggle");

        // –ó–∞–∫—Ä—ã—Ç—å –º–µ–Ω—é
        menu.classList.remove("active");

        // –°–∫—Ä—ã—Ç—å –∫–Ω–æ–ø–∫—É "–ú–µ–Ω—é" –Ω–∞ –ü–ö
        if (window.innerWidth > 768) {
            button.style.display = "none"; // –°–∫—Ä—ã—Ç—å –∫–Ω–æ–ø–∫—É –Ω–∞ –ü–ö
        } else {
            button.style.display = "none"; // –°–∫—Ä—ã—Ç—å –∫–Ω–æ–ø–∫—É –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
        }
    });
});

// –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å–∫—Ä—ã—Ç—å –∞–Ω–∏–º–∞—Ü–∏—é
window.addEventListener('load', function() {
    setTimeout(function() {
        let loader = document.getElementById("loader");
        loader.style.display = "none"; // –°–∫—Ä—ã—Ç—å –∞–Ω–∏–º–∞—Ü–∏—é —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥
    }, 300); // 2000 –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥ (2 —Å–µ–∫—É–Ω–¥—ã)
});
</script>
</body>
</html>